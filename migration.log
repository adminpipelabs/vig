2026-02-05 10:11:56,032 [INFO] ================================================================================
2026-02-05 10:11:56,032 [INFO] SQLITE ‚Üí POSTGRESQL MIGRATION
2026-02-05 10:11:56,032 [INFO] ================================================================================
2026-02-05 10:11:56,032 [INFO] 
2026-02-05 10:11:56,032 [INFO] üìÇ Reading from SQLite: vig.db
2026-02-05 10:11:56,039 [INFO] SQLite counts: {'bets': 23, 'windows': 33160, 'circuit_breaker_log': 0}
2026-02-05 10:11:56,039 [INFO] 
2026-02-05 10:11:56,039 [INFO] Connecting to PostgreSQL (attempt 1/3)...
2026-02-05 10:11:59,137 [INFO] ‚úì PostgreSQL connected
2026-02-05 10:11:59,137 [INFO] üî® Creating schema in PostgreSQL...
2026-02-05 10:12:00,374 [INFO] ‚úì Schema created
2026-02-05 10:12:00,374 [INFO] 
2026-02-05 10:12:00,374 [INFO] üì• Migrating bets...
2026-02-05 10:12:00,375 [ERROR] 
‚ùå Migration failed: 'sqlite3.Row' object has no attribute 'get'
2026-02-05 10:12:00,376 [ERROR] Traceback (most recent call last):
  File "/Users/mikaelo/vig/migrate_to_postgres.py", line 412, in <module>
    main()
  File "/Users/mikaelo/vig/migrate_to_postgres.py", line 284, in main
    b.get('condition_id', ''),
AttributeError: 'sqlite3.Row' object has no attribute 'get'

2026-02-05 10:19:37,832 [INFO] ================================================================================
2026-02-05 10:19:37,832 [INFO] SQLITE ‚Üí POSTGRESQL MIGRATION
2026-02-05 10:19:37,832 [INFO] ================================================================================
2026-02-05 10:19:37,832 [INFO] 
2026-02-05 10:19:37,832 [INFO] üìÇ Reading from SQLite: vig.db
2026-02-05 10:19:37,835 [INFO] SQLite counts: {'bets': 23, 'windows': 33160, 'circuit_breaker_log': 0}
2026-02-05 10:19:37,835 [INFO] 
2026-02-05 10:19:37,835 [INFO] Connecting to PostgreSQL (attempt 1/3)...
2026-02-05 10:19:40,915 [INFO] ‚úì PostgreSQL connected
2026-02-05 10:19:40,916 [INFO] üî® Creating schema in PostgreSQL...
2026-02-05 10:19:42,143 [INFO] ‚úì Schema created
2026-02-05 10:19:42,143 [INFO] 
2026-02-05 10:19:42,143 [INFO] üì• Migrating bets...
2026-02-05 10:20:42,764 [ERROR] 
‚ùå Migration failed: canceling statement due to statement timeout

2026-02-05 10:20:42,777 [ERROR] Traceback (most recent call last):
  File "/Users/mikaelo/vig/migrate_to_postgres.py", line 422, in <module>
    main()
  File "/Users/mikaelo/vig/migrate_to_postgres.py", line 303, in main
    migrate_table(
  File "/Users/mikaelo/vig/migrate_to_postgres.py", line 97, in migrate_table
    existing_ids = get_existing_ids(conn, table_name, id_column)
  File "/Users/mikaelo/vig/migrate_to_postgres.py", line 72, in get_existing_ids
    cur.execute(f"SELECT {id_column} FROM {table_name}")
psycopg2.errors.QueryCanceled: canceling statement due to statement timeout


2026-02-05 10:37:40,172 [INFO] ================================================================================
2026-02-05 10:37:40,173 [INFO] SQLITE ‚Üí POSTGRESQL MIGRATION
2026-02-05 10:37:40,173 [INFO] ================================================================================
2026-02-05 10:37:40,174 [INFO] 
2026-02-05 10:37:40,174 [INFO] üìÇ Reading from SQLite: vig.db
2026-02-05 10:37:40,179 [INFO] SQLite counts: {'bets': 23, 'windows': 33160, 'circuit_breaker_log': 0}
2026-02-05 10:37:40,179 [INFO] 
2026-02-05 10:37:40,180 [INFO] Connecting to PostgreSQL (attempt 1/3)...
2026-02-05 10:37:43,275 [INFO] ‚úì PostgreSQL connected
2026-02-05 10:37:43,276 [INFO] üî® Creating schema in PostgreSQL...
2026-02-05 10:37:44,502 [INFO] ‚úì Schema created
2026-02-05 10:37:44,502 [INFO] 
2026-02-05 10:37:44,502 [INFO] üì• Migrating bets...
2026-02-05 10:42:45,422 [WARNING]   ‚ö†Ô∏è  Check for existing bets timed out, assuming empty
2026-02-05 10:42:45,423 [INFO]   bets: Migrating 23 new rows (of 23 total) in 1 batches
2026-02-05 10:42:45,731 [WARNING]   Batch 1 failed (attempt 1/3): current transaction is aborted, commands ignored until end of transaction block

2026-02-05 10:42:45,731 [INFO]   Retrying batch 1...
2026-02-05 10:42:45,734 [INFO] Connecting to PostgreSQL (attempt 1/3)...
2026-02-05 10:42:48,693 [INFO] ‚úì PostgreSQL connected
2026-02-05 10:43:50,005 [WARNING]   Batch 1 failed (attempt 2/3): canceling statement due to statement timeout

2026-02-05 10:43:50,006 [INFO]   Retrying batch 1...
2026-02-05 10:43:50,007 [INFO] Connecting to PostgreSQL (attempt 1/3)...
2026-02-05 10:43:52,924 [INFO] ‚úì PostgreSQL connected
2026-02-05 10:44:54,236 [ERROR]   ‚ùå Batch 1 failed after 3 attempts: canceling statement due to statement timeout

2026-02-05 10:44:54,238 [ERROR]   Migration stopped. 0 rows migrated so far.
2026-02-05 10:44:54,239 [ERROR] 
‚ùå Migration failed: canceling statement due to statement timeout

2026-02-05 10:44:54,242 [ERROR] Traceback (most recent call last):
  File "/Users/mikaelo/vig/migrate_to_postgres.py", line 433, in <module>
  File "/Users/mikaelo/vig/migrate_to_postgres.py", line 314, in main
    b['price'],
  File "/Users/mikaelo/vig/migrate_to_postgres.py", line 148, in migrate_table
    end_idx = min(start_idx + batch_size, total_rows)
psycopg2.errors.QueryCanceled: canceling statement due to statement timeout


2026-02-05 10:47:10,609 [INFO] ================================================================================
2026-02-05 10:47:10,613 [INFO] SQLITE ‚Üí POSTGRESQL MIGRATION
2026-02-05 10:47:10,613 [INFO] ================================================================================
2026-02-05 10:47:10,614 [INFO] 
2026-02-05 10:47:10,614 [INFO] üìÇ Reading from SQLite: vig.db
2026-02-05 10:47:10,821 [INFO] SQLite counts: {'bets': 23, 'windows': 33160, 'circuit_breaker_log': 0}
2026-02-05 10:47:10,821 [INFO] 
2026-02-05 10:47:10,822 [INFO] Connecting to PostgreSQL (attempt 1/3)...
2026-02-05 10:47:13,781 [INFO] ‚úì PostgreSQL connected
2026-02-05 10:47:13,782 [INFO] üî® Creating schema in PostgreSQL...
2026-02-05 10:47:15,005 [INFO] ‚úì Schema created
2026-02-05 10:47:15,005 [INFO] 
2026-02-05 10:47:15,006 [INFO] üì• Migrating bets...
2026-02-05 10:48:15,623 [WARNING]   ‚ö†Ô∏è  Could not check existing bets, assuming empty: canceling statement due to statement timeout

2026-02-05 10:48:15,625 [INFO]   bets: Migrating 23 new rows (of 23 total) in 1 batches
2026-02-05 10:48:15,930 [WARNING]   Batch 1 failed (attempt 1/3): current transaction is aborted, commands ignored until end of transaction block

2026-02-05 10:48:15,931 [INFO]   Retrying batch 1...
2026-02-05 10:48:15,932 [INFO] Connecting to PostgreSQL (attempt 1/3)...
2026-02-05 10:48:18,728 [INFO] ‚úì PostgreSQL connected
2026-02-05 10:49:20,042 [WARNING]   Batch 1 failed (attempt 2/3): canceling statement due to statement timeout

2026-02-05 10:49:20,044 [INFO]   Retrying batch 1...
2026-02-05 10:49:20,045 [INFO] Connecting to PostgreSQL (attempt 1/3)...
2026-02-05 10:49:22,977 [INFO] ‚úì PostgreSQL connected
2026-02-05 10:50:24,292 [ERROR]   ‚ùå Batch 1 failed after 3 attempts: canceling statement due to statement timeout

2026-02-05 10:50:24,294 [ERROR]   Migration stopped. 0 rows migrated so far.
2026-02-05 10:50:24,295 [ERROR] 
‚ùå Migration failed: canceling statement due to statement timeout

2026-02-05 10:50:24,302 [ERROR] Traceback (most recent call last):
  File "/Users/mikaelo/vig/migrate_to_postgres.py", line 450, in <module>
    main()
  File "/Users/mikaelo/vig/migrate_to_postgres.py", line 331, in main
    migrate_table(
  File "/Users/mikaelo/vig/migrate_to_postgres.py", line 165, in migrate_table
    cur.executemany(insert_sql, batch)
psycopg2.errors.QueryCanceled: canceling statement due to statement timeout


